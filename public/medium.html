<!DOCTYPE html>
<html>
<head>
  <title>Medium</title>
  <style>
    *, *:before, *:after { box-sizing: border-box; }
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    body {
        font-family: Arial, Helvetica, sans-serif;
        color: #fff;
        background-color: black;
        overflow: hidden;
    }
    #answers {
        font-size: 80px;
        line-height: 120px;
        height: 100%;
        overflow: hidden;
        position: relative;
        top: 0;
        transition: top 0.3s linear;
        padding: 10px;
    }
  </style>
</head>
<body>

<div id="answers"></div>

<script>
    const ws = new WebSocket('ws://localhost:3000');
    let offset = 0;

    ws.addEventListener('message', async function(event) {
        const answerDiv = document.getElementById('answers');
        const newAnswer = document.createElement('div');
        // Parsing the received message from the server
        const text = JSON.parse(event.data);  // The text is directly the parsed data

        console.log('hello');

        console.log(event.data);

        console.log(text);

        answerDiv.innerHTML = '';
        answerDiv.appendChild(newAnswer);
        answerDiv.style.top = '0px';

        // Type out the new answer
        for (let i = 0; i < text.length; i++) {
            await new Promise(resolve => setTimeout(resolve, 50)); // 50ms pause between each character
            newAnswer.innerHTML += text.charAt(i);
        }
    });
</script>

</body>
</html>
